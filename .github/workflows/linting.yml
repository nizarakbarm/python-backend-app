name: Linters

on:
    pull_request:
        types: [opened, reopened]
        branches:
        - develop
        - 'feature/**'
    push:
        branches:
        - main
        - develop
        - 'feature/**'

concurrency:
    group: ${{ github.workflow}}-${{ github.ref }}
    cancel-in-progress: true

permissions:
    contents: read

jobs:
    flake8:
       name: flake8
       runs-on: ubuntu-latest
       steps:
        - name: Checkout
          uses: actions/checkout@v4
        - name: Setup Python
          uses: actions/setup-python@v4
          with:
            python-version: '3.11'
        - run: pip install -r requirements.txt
        - run: pip install flake8
        - name: flake8
          uses: liskin/gh-problem-matcher-wrap@c16e095dffef531e20a97f84d22d1363e0964c75
          with:
            linters: flake8
            run: flake8 .

    isort:
        runs-on: ubuntu-latest
        steps:
         - name: Checkout
           uses: actions/checkout@v4
         - name: Setup Python
           uses: actions/setup-python@v4
           with:
            python-version: '3.11'
         - run: pip install -r requirements.txt
         - run: pip install isort
         - name: isort
           uses: liskin/gh-problem-matcher-wrap@c16e095dffef531e20a97f84d22d1363e0964c75
           with:
            linters: isort
            run: isort --check web.py

    black:
        runs-on: ubuntu-latest
        steps:
         - name: Checkout
           uses: actions/checkout@v4
         - name: Setup Python
           uses: actions/setup-python@v4
           with:
            python-version: '3.11'
         - run: pip install -r requirements.txt
         - name: black
           uses: psf/black@stable
